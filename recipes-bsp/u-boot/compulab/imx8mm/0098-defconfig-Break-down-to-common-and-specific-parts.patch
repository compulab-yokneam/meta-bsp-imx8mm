From e01f1bf65ea9a296254c84389b846f8388642105 Mon Sep 17 00:00:00 2001
From: Kirill Kapranov <kirill.kapranov@compulab.co.il>
Date: Mon, 4 Oct 2021 00:18:04 +0300
Subject: [PATCH 98/98] defconfig: Break down to common and specific parts

Signed-off-by: Kirill Kapranov <kirill.kapranov@compulab.co.il>
---
 ...mini_defconfig => cl-imx8m-mini_defconfig} |   4 -
 configs/iot-gate-imx8.config                  |  15 +++
 configs/iot-gate-imx8_defconfig               | 102 -----------------
 configs/mcm-imx8m-mini.config                 |   5 +
 configs/ucm-imx8m-mini.config                 |   5 +
 configs/ucm-imx8m-mini_defconfig              | 106 ------------------
 6 files changed, 25 insertions(+), 212 deletions(-)
 rename configs/{mcm-imx8m-mini_defconfig => cl-imx8m-mini_defconfig} (93%)
 create mode 100644 configs/iot-gate-imx8.config
 delete mode 100644 configs/iot-gate-imx8_defconfig
 create mode 100644 configs/mcm-imx8m-mini.config
 create mode 100644 configs/ucm-imx8m-mini.config
 delete mode 100644 configs/ucm-imx8m-mini_defconfig

diff --git a/configs/mcm-imx8m-mini_defconfig b/configs/cl-imx8m-mini_defconfig
similarity index 93%
rename from configs/mcm-imx8m-mini_defconfig
rename to configs/cl-imx8m-mini_defconfig
index a54442424e..b54110b42f 100644
--- a/configs/mcm-imx8m-mini_defconfig
+++ b/configs/cl-imx8m-mini_defconfig
@@ -7,13 +7,11 @@ CONFIG_SPL_GPIO_SUPPORT=y
 CONFIG_ENV_SIZE=0x1000
 CONFIG_ENV_OFFSET=0x4400
 CONFIG_DM_GPIO=y
-CONFIG_TARGET_MCM_IMX8M_MINI=y
 CONFIG_SPL_MMC_SUPPORT=y
 CONFIG_SPL_SERIAL_SUPPORT=y
 CONFIG_SPL=y
 CONFIG_CSF_SIZE=0x2000
 CONFIG_SPL_TEXT_BASE=0x7E1000
-CONFIG_LOCALVERSION="-mcm-imx8m-mini-1.0"
 CONFIG_FIT=y
 CONFIG_FIT_EXTERNAL_OFFSET=0x3000
 CONFIG_SPL_LOAD_FIT=y
@@ -21,7 +19,6 @@ CONFIG_SPL_FIT_GENERATOR="arch/arm/mach-imx/mkimage_fit_atf.sh"
 CONFIG_OF_SYSTEM_SETUP=y
 CONFIG_SYS_EXTRA_OPTIONS="IMX_CONFIG=arch/arm/mach-imx/imx8m/imximage-8mm-lpddr4.cfg"
 CONFIG_CONSOLE_MUX=y
-CONFIG_DEFAULT_FDT_FILE="mcm-imx8m-mini.dtb"
 CONFIG_BOARD_LATE_INIT=y
 CONFIG_ARCH_MISC_INIT=y
 CONFIG_BOARD_EARLY_INIT_F=y
@@ -51,7 +48,6 @@ CONFIG_CMD_FAT=y
 CONFIG_CMD_FS_GENERIC=y
 CONFIG_EFI_PARTITION=y
 CONFIG_OF_CONTROL=y
-CONFIG_DEFAULT_DEVICE_TREE="mcm-imx8m-mini"
 CONFIG_ENV_IS_IN_MMC=y
 CONFIG_SYS_RELOC_GD_ENV_ADDR=y
 CONFIG_ENV_VARS_UBOOT_RUNTIME_CONFIG=y
diff --git a/configs/iot-gate-imx8.config b/configs/iot-gate-imx8.config
new file mode 100644
index 0000000000..bbf57904a3
--- /dev/null
+++ b/configs/iot-gate-imx8.config
@@ -0,0 +1,15 @@
+CONFIG_TARGET_IOT_GATE_IMX8=y
+CONFIG_DEFAULT_DTB="sb-iotgimx8-can.dtb"
+CONFIG_LOCALVERSION="-iot-gate-imx8-1.0"
+CONFIG_DEFAULT_FDT_FILE="sb-iotgimx8-can.dtb"
+CONFIG_DEFAULT_DEVICE_TREE="iot-gate-imx8"
+CONFIG_DM_PCA953X=n
+CONFIG_DM_RESET=y
+CONFIG_SYSRESET=y
+CONFIG_SYSRESET_PSCI=y
+CONFIG_DM_VIDEO=n
+CONFIG_SYS_WHITE_ON_BLACK=n
+CONFIG_VIDEO_LCD_STARTEK_ILI9881C=n
+CONFIG_VIDEO_IMX_SEC_DSI=n
+ONFIG_LED=n
+CONFIG_LED_GPIO=n
diff --git a/configs/iot-gate-imx8_defconfig b/configs/iot-gate-imx8_defconfig
deleted file mode 100644
index 39c448eca0..0000000000
--- a/configs/iot-gate-imx8_defconfig
+++ /dev/null
@@ -1,102 +0,0 @@
-CONFIG_ARM=y
-CONFIG_SPL_SYS_ICACHE_OFF=y
-CONFIG_SPL_SYS_DCACHE_OFF=y
-CONFIG_ARCH_IMX8M=y
-CONFIG_SYS_TEXT_BASE=0x40200000
-CONFIG_SPL_GPIO_SUPPORT=y
-CONFIG_ENV_SIZE=0x1000
-CONFIG_ENV_OFFSET=0x4400
-CONFIG_DM_GPIO=y
-CONFIG_TARGET_IOT_GATE_IMX8=y
-CONFIG_DEFAULT_DTB="sb-iotgimx8-can.dtb"
-CONFIG_SPL_MMC_SUPPORT=y
-CONFIG_SPL_SERIAL_SUPPORT=y
-CONFIG_SPL=y
-CONFIG_CSF_SIZE=0x2000
-CONFIG_SPL_TEXT_BASE=0x7E1000
-CONFIG_LOCALVERSION="-iot-gate-imx8-1.0"
-CONFIG_FIT=y
-CONFIG_FIT_EXTERNAL_OFFSET=0x3000
-CONFIG_SPL_LOAD_FIT=y
-CONFIG_SPL_FIT_GENERATOR="arch/arm/mach-imx/mkimage_fit_atf.sh"
-CONFIG_OF_SYSTEM_SETUP=y
-CONFIG_SYS_EXTRA_OPTIONS="IMX_CONFIG=arch/arm/mach-imx/imx8m/imximage-8mm-lpddr4.cfg"
-CONFIG_CONSOLE_MUX=y
-CONFIG_DEFAULT_FDT_FILE="sb-iotgimx8-can.dtb"
-CONFIG_BOARD_LATE_INIT=y
-CONFIG_ARCH_MISC_INIT=y
-CONFIG_BOARD_EARLY_INIT_F=y
-CONFIG_SPL_BOARD_INIT=y
-CONFIG_SPL_SEPARATE_BSS=y
-CONFIG_SPL_POWER_SUPPORT=y
-CONFIG_HUSH_PARSER=y
-CONFIG_SYS_PROMPT="u-boot=> "
-# CONFIG_BOOTM_NETBSD is not set
-CONFIG_CMD_EEPROM=y
-CONFIG_CMD_EEPROM_LAYOUT=y
-CONFIG_CMD_MEMINFO=y
-CONFIG_CMD_MEMTEST=y
-CONFIG_CMD_CLK=y
-CONFIG_CMD_FUSE=y
-CONFIG_CMD_GPIO=y
-CONFIG_CMD_I2C=y
-CONFIG_CMD_MMC=y
-CONFIG_CMD_DHCP=y
-CONFIG_CMD_MII=y
-CONFIG_CMD_PING=y
-CONFIG_CMD_CACHE=y
-CONFIG_CMD_REGULATOR=y
-CONFIG_CMD_EXT2=y
-CONFIG_CMD_EXT4=y
-CONFIG_CMD_FAT=y
-CONFIG_CMD_FS_GENERIC=y
-CONFIG_EFI_PARTITION=y
-CONFIG_OF_CONTROL=y
-CONFIG_DEFAULT_DEVICE_TREE="iot-gate-imx8"
-CONFIG_ENV_IS_IN_MMC=y
-CONFIG_SYS_RELOC_GD_ENV_ADDR=y
-CONFIG_ENV_VARS_UBOOT_RUNTIME_CONFIG=y
-CONFIG_REGMAP=y
-CONFIG_SYSCON=y
-CONFIG_CLK_COMPOSITE_CCF=y
-CONFIG_CLK_IMX8MM=y
-CONFIG_MXC_GPIO=y
-CONFIG_DM_I2C=y
-CONFIG_SYS_I2C_MXC=y
-CONFIG_DM_MMC=y
-CONFIG_SUPPORT_EMMC_BOOT=y
-CONFIG_MMC_IO_VOLTAGE=y
-CONFIG_MMC_UHS_SUPPORT=y
-CONFIG_MMC_HS400_ES_SUPPORT=y
-CONFIG_MMC_HS400_SUPPORT=y
-CONFIG_FSL_ESDHC_IMX=y
-CONFIG_DM_ETH=y
-CONFIG_FEC_MXC=y
-CONFIG_MII=y
-CONFIG_PINCTRL=y
-CONFIG_PINCTRL_IMX8M=y
-CONFIG_DM_REGULATOR=y
-CONFIG_DM_REGULATOR_FIXED=y
-CONFIG_DM_REGULATOR_GPIO=y
-CONFIG_DM_RESET=y
-CONFIG_MXC_UART=y
-CONFIG_SYSRESET=y
-CONFIG_SYSRESET_PSCI=y
-CONFIG_DM_THERMAL=y
-CONFIG_NXP_TMU=y
-CONFIG_USB=y
-CONFIG_DM_USB=y
-CONFIG_USB_EHCI_HCD=y
-CONFIG_USB_GADGET=y
-CONFIG_USB_GADGET_MANUFACTURER="FSL"
-CONFIG_USB_GADGET_VENDOR_NUM=0x0525
-CONFIG_USB_GADGET_PRODUCT_NUM=0xa4a5
-CONFIG_CI_UDC=y
-CONFIG_SDP_LOADADDR=0x40400000
-CONFIG_USB_GADGET_DOWNLOAD=y
-CONFIG_USB_HOST_ETHER=y
-CONFIG_USB_ETHER_ASIX88179=y
-CONFIG_EXT4_WRITE=y
-CONFIG_FAT_WRITE=y
-CONFIG_OF_LIBFDT_OVERLAY=y
-# CONFIG_EFI_LOADER is not set
diff --git a/configs/mcm-imx8m-mini.config b/configs/mcm-imx8m-mini.config
new file mode 100644
index 0000000000..0cf37e709b
--- /dev/null
+++ b/configs/mcm-imx8m-mini.config
@@ -0,0 +1,5 @@
+CONFIG_LOCALVERSION="-mcm-imx8m-mini-2.1"
+CONFIG_TARGET_MCM_IMX8M_MINI=y
+CONFIG_DEFAULT_DTB="mcm-imx8m-mini.dtb"
+CONFIG_DEFAULT_FDT_FILE="mcm-imx8m-mini.dtb"
+CONFIG_DEFAULT_DEVICE_TREE="mcm-imx8m-mini"
diff --git a/configs/ucm-imx8m-mini.config b/configs/ucm-imx8m-mini.config
new file mode 100644
index 0000000000..41d00fe549
--- /dev/null
+++ b/configs/ucm-imx8m-mini.config
@@ -0,0 +1,5 @@
+CONFIG_LOCALVERSION="-ucm-imx8m-mini-2.1"
+CONFIG_TARGET_UCM_IMX8M_MINI=y
+CONFIG_DEFAULT_DTB="ucm-imx8m-mini.dtb"
+CONFIG_DEFAULT_FDT_FILE="ucm-imx8m-mini.dtb"
+CONFIG_DEFAULT_DEVICE_TREE="ucm-imx8m-mini"
diff --git a/configs/ucm-imx8m-mini_defconfig b/configs/ucm-imx8m-mini_defconfig
deleted file mode 100644
index 8bfde68c49..0000000000
--- a/configs/ucm-imx8m-mini_defconfig
+++ /dev/null
@@ -1,106 +0,0 @@
-CONFIG_LOCALVERSION="-ucm-imx8m-mini-2.2"
-CONFIG_ARM=y
-CONFIG_SPL_SYS_ICACHE_OFF=y
-CONFIG_SPL_SYS_DCACHE_OFF=y
-CONFIG_ARCH_IMX8M=y
-CONFIG_SYS_TEXT_BASE=0x40200000
-CONFIG_SPL_GPIO_SUPPORT=y
-CONFIG_ENV_SIZE=0x1000
-CONFIG_ENV_OFFSET=0x4400
-CONFIG_DM_GPIO=y
-CONFIG_TARGET_UCM_IMX8M_MINI=y
-CONFIG_DEFAULT_DTB="ucm-imx8m-mini.dtb"
-CONFIG_SPL_MMC_SUPPORT=y
-CONFIG_SPL_SERIAL_SUPPORT=y
-CONFIG_SPL=y
-CONFIG_CSF_SIZE=0x2000
-CONFIG_SPL_TEXT_BASE=0x7E1000
-CONFIG_FIT=y
-CONFIG_FIT_EXTERNAL_OFFSET=0x3000
-CONFIG_SPL_LOAD_FIT=y
-CONFIG_SPL_FIT_GENERATOR="arch/arm/mach-imx/mkimage_fit_atf.sh"
-CONFIG_OF_SYSTEM_SETUP=y
-CONFIG_SYS_EXTRA_OPTIONS="IMX_CONFIG=arch/arm/mach-imx/imx8m/imximage-8mm-lpddr4.cfg"
-CONFIG_CONSOLE_MUX=y
-CONFIG_DEFAULT_FDT_FILE="ucm-imx8m-mini.dtb"
-CONFIG_BOARD_LATE_INIT=y
-CONFIG_ARCH_MISC_INIT=y
-CONFIG_BOARD_EARLY_INIT_F=y
-CONFIG_SPL_BOARD_INIT=y
-CONFIG_SPL_SEPARATE_BSS=y
-CONFIG_SPL_POWER_SUPPORT=y
-CONFIG_HUSH_PARSER=y
-CONFIG_SYS_PROMPT="u-boot=> "
-# CONFIG_BOOTM_NETBSD is not set
-CONFIG_CMD_EEPROM=y
-CONFIG_CMD_EEPROM_LAYOUT=y
-CONFIG_CMD_MEMINFO=y
-CONFIG_CMD_MEMTEST=y
-CONFIG_CMD_CLK=y
-CONFIG_CMD_FUSE=y
-CONFIG_CMD_GPIO=y
-CONFIG_CMD_I2C=y
-CONFIG_CMD_MMC=y
-CONFIG_CMD_DHCP=y
-CONFIG_CMD_MII=y
-CONFIG_CMD_PING=y
-CONFIG_CMD_CACHE=y
-CONFIG_CMD_REGULATOR=y
-CONFIG_CMD_EXT2=y
-CONFIG_CMD_EXT4=y
-CONFIG_CMD_FAT=y
-CONFIG_CMD_FS_GENERIC=y
-CONFIG_EFI_PARTITION=y
-CONFIG_OF_CONTROL=y
-CONFIG_DEFAULT_DEVICE_TREE="ucm-imx8m-mini"
-CONFIG_ENV_IS_IN_MMC=y
-CONFIG_SYS_RELOC_GD_ENV_ADDR=y
-CONFIG_ENV_VARS_UBOOT_RUNTIME_CONFIG=y
-CONFIG_REGMAP=y
-CONFIG_SYSCON=y
-CONFIG_CLK_COMPOSITE_CCF=y
-CONFIG_CLK_IMX8MM=y
-CONFIG_MXC_GPIO=y
-CONFIG_DM_PCA953X=y
-CONFIG_DM_I2C=y
-CONFIG_SYS_I2C_MXC=y
-CONFIG_DM_MMC=y
-CONFIG_SUPPORT_EMMC_BOOT=y
-CONFIG_MMC_IO_VOLTAGE=y
-CONFIG_MMC_UHS_SUPPORT=y
-CONFIG_MMC_HS400_ES_SUPPORT=y
-CONFIG_MMC_HS400_SUPPORT=y
-CONFIG_FSL_ESDHC_IMX=y
-CONFIG_DM_ETH=y
-CONFIG_FEC_MXC=y
-CONFIG_MII=y
-CONFIG_PINCTRL=y
-CONFIG_PINCTRL_IMX8M=y
-CONFIG_DM_REGULATOR=y
-CONFIG_DM_REGULATOR_FIXED=y
-CONFIG_DM_REGULATOR_GPIO=y
-CONFIG_MXC_UART=y
-CONFIG_DM_THERMAL=y
-CONFIG_NXP_TMU=y
-CONFIG_USB=y
-CONFIG_DM_USB=y
-CONFIG_USB_EHCI_HCD=y
-CONFIG_USB_GADGET=y
-CONFIG_USB_GADGET_MANUFACTURER="FSL"
-CONFIG_USB_GADGET_VENDOR_NUM=0x0525
-CONFIG_USB_GADGET_PRODUCT_NUM=0xa4a5
-CONFIG_CI_UDC=y
-CONFIG_SDP_LOADADDR=0x40400000
-CONFIG_USB_GADGET_DOWNLOAD=y
-CONFIG_USB_HOST_ETHER=y
-CONFIG_USB_ETHER_ASIX88179=y
-CONFIG_DM_VIDEO=y
-CONFIG_SYS_WHITE_ON_BLACK=y
-CONFIG_VIDEO_LCD_STARTEK_ILI9881C=y
-CONFIG_VIDEO_IMX_SEC_DSI=y
-CONFIG_EXT4_WRITE=y
-CONFIG_FAT_WRITE=y
-CONFIG_OF_LIBFDT_OVERLAY=y
-# CONFIG_EFI_LOADER is not set
-CONFIG_LED=y
-CONFIG_LED_GPIO=y
-- 
2.17.1

